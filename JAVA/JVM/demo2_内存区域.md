## 运行时数据区域

### 数据区域图：

![what is jvm in java?](https://cdn.jsdelivr.net/gh/dlagez/img@master/jvm-arch.jpeg)



#### 程序计数器：`pc registers`

- 是当前线程所执行的字节码的行号指示器。
- 字节码解释器的工作就是 通过改变这个计数器的值来选取下一条需要执行的字节码指令。
- 它是程序控制流的指示器。
- 分支、循环、跳转、异常处理、线程恢复等基础功能都需要依赖这个计数器来完成。

每个线程都有一个程序计数器。

对于一核处理器同一时间内只会执行一条线程中的指令，因此，为了线程切换后能恢复到正确的执行位置，每条线程都要有一个独立的程序计数器。各条线程之间的程序计数器互不影响。



#### `java`虚拟机栈 `VM stack`

线程私有，他的生命周期与线程相同。虚拟机栈描述的是`Java`方法执行的线程内存模型。

每个方法被执行的时候，`java`虚拟机都会同步创建一个栈帧用于存储局部变量表、操作数栈、动态连接、方法出口等信息。

每一个方法被调用直至执行完毕的过程，就对应着一个栈帧在虚拟机栈中从入栈道出栈的过程。



栈中包含局部变量表。

局部变量表存放了编译期可知的各种`java`虚拟机基本数据类型、对象引用、`returnAddress`等



当进入一个方法时，这个方法需要在栈帧中分配多大的局部变量空间是完全确定的，在方法运行期间不会改变局部变量表的大小。



#### 本地方法栈：

和`VM stacks`类似，`VM stacks为`java`方法服务，本地方法栈为`Native`方法服务。



#### `java` 堆

`Java Heap`是虚拟机所管理的内存中最大的一块，java堆是所有线程共享的一块区域，在虚拟机启动时创建。次内存区域的唯一目的就是存放对象实例。



#### 方法区：

各个线程共享的区域它用于存储已被虚拟机加载的类型信息、常量、静态变量、即时编译器编译后的代码缓存等数据。





















