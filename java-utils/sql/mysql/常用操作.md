- 删除用户：delete from user where user='roczhang';
- 创建用户：create user 'roczhang'@'localhost' identified by 'password';
- 查询数据库所有用户：select host, user from user;

------

- 开机不重启：


- 登录mysql：mysql -u root -p
  password
- ubuntu的mysql重启命令：sudo service mysql restart
- 停用mysql：service mysql stop
- 创建数据库：create DATABASE roczhang;
- 执行sql文件：use roczhang; source /data/create.sql
- 查看mysql数据库列表：show databases;
- 使用某个库：use mysql;
- 查看表列表：show tables;
- 查看某一个表：show columns from user;
- 查看当前用户：select user();
- 用来显示授予用户：SHOW GRANTS
- 显示建表语句：SHOW CREATE TABLE TEST

### select操作

- select * from user
- select distinct id from user 检索出不同的id
- select name from user limit 5 限制检索出来的个数
- select name from user limit 5, 5; 查询第5行开始的5列
- select name from user order by name (desc); 按名字排序

where操作

- where name = '张三'
- where price < 10
- where id != 1003
- where price between 5 andd 10;
- where price is null;
- where id = 1003 and price < 10
- where iid = 1003 or price < 10;
- where id not in (1002, 1003) 选择id不等于1002，1003的列

### 通配符

%表示任何字符出现任意次数

- where name like 'roc%' 检索任意以roc开头的词；
- where name like '%roc%' 检索任何位置包含文本roc的值

_ 通配符 只匹配单个字符

- where name like '_ton'

数据处理函数

- Upper() 将文本转换为大写



### 设置外键：

学生是多，课程是一，学生课程多对一。

```sql
ALTER TABLE students
ADD CONSTRAINT fk_class_id
FOREIGN KEY (class_id)
REFERENCES classes (id);
```

```sql
ALTER TABLE ums_admin_role_relation 
ADD CONSTRAINT fk_role_relation_admin
FOREIGN KEY (admin_id)
REFERENCES ums_admin (id);
```

创建表的时候创建外键：

```sql
CREATE TABLE `ums_admin_role_relation` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `admin_id` bigint DEFAULT NULL,
  `role_id` bigint DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_role_relation_admin` (`admin_id`),
  KEY `fk_role_relation_role` (`role_id`),
  CONSTRAINT `fk_role_relation_admin` FOREIGN KEY (`admin_id`) REFERENCES `ums_admin` (`id`),
  CONSTRAINT `fk_role_relation_role` FOREIGN KEY (`role_id`) REFERENCES `ums_role` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=40 DEFAULT CHARSET=utf8mb3 COMMENT='后台用户和角色关系表';
```

总结：一般是这样写

- 一般修改有另一个表主键的表。
- 外键名叫fk+修改的表明+主键表明
- 外键：另一个表的主键
- 参考：另一个表名（主键）

多对多怎么设置外键。得创建一个链接表，多对多的两表对这个表都是一对多。



navicat导出数据库：选择数据库->右键：Dump SqlFile即可。
