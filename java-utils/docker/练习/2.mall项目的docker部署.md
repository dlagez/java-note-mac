这里是ubuntu安装

### mysql安装

```
docker pull mysql
```

启用mysql服务

```
sudo docker run -p 3306:3306 --name mysql -v /mydata/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=password -d mysql
```

- -p 3306:3306：将容器的3306端口映射到主机的3306端口
- -v /mydata/mysql/conf:/etc/mysql：将配置文件夹挂在到主机。// 挂载出错
- -v /mydata/mysql/log:/var/log/mysql：将日志文件夹挂载到主机  // 挂载出错
- -v /mydata/mysql/data:/var/lib/mysql/：将数据文件夹挂载到主机
- -e MYSQL_ROOT_PASSWORD=root：初始化root用户的密码
- -d 后台运行不退出

将ubuntu的文件拷贝至ubuntu的docker容器里面

```
sudo docker cp /mydata/mall.sql mysql:/
```

```
use mall;
source /mall.sql;
```

直接使用root进行登录

### redis安装

```
sudo docker pull redis
```

```
sudo docker run -p 6379:6379 --name redis -d redis redis-server --appendonly yes
```

- --appendonly yes 开启redis 持久化
- -p 6379:6379 指定端口号

进入容器

```
sudo docker exec -it redis redis-cli
```

### Nginx安装

```
sudo docker pull nginx
```

运行

```
sudo docker run -p 80:80 --name nginx -d nginx
```

### RabbitMQ安装

```
sudo docker pull rabbitmq
```

启动

```
sudo docker run -p 5672:5672 -p 15672:15672 --name rabbitmq -d rabbitmq
```

进入容器并管理功能

```
sudo docker exec -it rabbitmq /bin/bash
rabbitmq-plugins enable rabbitmq_management
```

访问：       http://192.168.31.88:15672/        可进入rabbitmq

进入之后新增用户

- 用户名：roczhang
- 密码：password

![image-20210919093513262](2.mall%E9%A1%B9%E7%9B%AE%E7%9A%84docker%E9%83%A8%E7%BD%B2.assets/image-20210919093513262.png)

创建一个Virtual Hosts。  这里使用的是roczhang host

![image-20210919093626076](2.mall%E9%A1%B9%E7%9B%AE%E7%9A%84docker%E9%83%A8%E7%BD%B2.assets/image-20210919093626076.png)

### elasticsearch安装

```
sudo docker pull elasticsearch
```

```
sudo docker run -p 9200:9200 -p 9300:9300 --name elasticsearch -e "discovery.type=single-node" -e "cluster.name=elasticsearch" -d elasticsearch:7.6.2
```

- **-e username="ritchie":** 设置环境变量；

- 9200作为Http协议，主要用于外部通讯

  9300作为Tcp协议，jar之间就是通过tcp协议通讯

  ES集群之间是通过9300进行通讯

安装中文分词插件

安装不了，网络下载慢

### Logstash安装

只是把安装包下载了

```
sudo docker pull logstash:7.6.2
```

还没有配置