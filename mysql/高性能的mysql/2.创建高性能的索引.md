## 基本概念

索引：（在mysql中也叫做“键（key）”）具备查询快速的优点。

索引就像目录

### 索引的类型

索引在存储引擎层而不是服务器层实现的。

#### B-Tree索引

默认索引

底层的存储引擎也可能使用不同的存储结构。T-Tree，B+Tree等

就是顺序树的查找。

适用于：全值匹配，匹配最左前缀等等。

限制：不是按照索引的最左列开始查找

#### 哈希索引

基于哈希表实现，只有精确匹配索引所有列的查询才有效。

哈希索引将所有的哈希码存储在索引中，同时在哈希表中保存指向每个数据行的指针。

限制：

- 哈希索引并不是按照索引值的顺序索引的，所以也就无法用于排序。
- 不支持部分索引。
- 只支持等值比较查询。

#### 空间数据索引：

MyISAM表支持空间索引

#### 全文索引：

它查找的是文本中的关键词，而不是直接比较索引中的值。

需要注意细节：停用词，词干和复词等等。

### 索引的优点

索引可以让服务器快速地定位到表的位置。

- 索引大大减少了服务器需要扫描的数据量
- 索引可以帮助服务器避免排序和临时表。
- 索引可以随机I/O表为顺序I/O。

### 高性能的索引策略：

#### 独立的列

始终将索引列单独的放在比较符号的一侧：

```sql
select id from actor where id+1=5;
```

很明显id=4，但是mysql无法自动解析这个方程式。

#### 前缀索引和索引选择性

当一些值很大的时候需要选择前几个字节作为索引，对于BLOB，TEXT类型必须使用前缀索引。

#### 多列索引

并不是为每个列都创建索引。

#### 选择合适的索引列顺序

将选择性最高的列放在索引最前列。