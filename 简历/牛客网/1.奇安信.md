### 进程，线程

对于操作系统来说，一个任务就是一个进程，比如打开一个浏览器，就是开启一个浏览器进程。打开一个笔记本就启动了一个笔记本进程。

有一些进程不止同时干一件事情，要同时干多件事情，就要同时运行多个子任务，进程的子任务叫做线程。

进程间相互不会影响，一个进程挂了，不会影响另外一个进程的运行，而线程是一个进程的子任务，某个进程的其中一个线程挂了，那么这个进程的其他线程也会挂掉。

### 进程间的通信方式

1. 共享内存

   最有用的进程间通信方式。

   使得多个进程可以访问同一块内存空间，不同的进程可以及时看到对方进程中对共享内存数据的更新。

   需要依靠某种同步操作，如互斥锁和信号量等。

2. 消息队列

   是在消息的传输过程中保存消息的容器。

   具有写权限的进程可以按照一定得规则向消息队列中添加新信息。

   对消息队列有读权限的进程则可以从消息队列中读取信息。

3. 信号

    用于通知接收进程某个事件已经发生。

4. 信号量

### 调度方法

1. 先来先服务调度算法

   该调度算法既可以用于作业调度也可以用于进程调度。

   - 在作业调度中，算法每次从后备作业队列中选择**最先进入该队列的一个或几个**作业，将它们调入内存，分配必要的资源，创建进程并放入就绪队列。
   - 在进程调度中，FCFS调度算法每次从就绪队列中选择**最先进入该队列**的进程，将处理机分配给它，使之投入运行，直到**完成**或因某种原因而**阻塞**时才释放处理机。

   若一个长作业先到达系统，就会使后面许多短作业等待很长时间

2. 短作业（进程）优先调度算法

   作业越短，其优先级别越高。作业的长短是以作业所要求的运行时间来衡量的。

   - 短作业优先(SJF)调度算法是从后备队列中选择一个或若干个估计运行时间最短的作业，将它们调入内存运行。
   - 短进程优先(SPF)调度算法，则是从就绪队列中选择一个**估计**运行时间最短的进程，将处理机分配给它，使之立即执行，直到完成或发生某事件而阻塞时，才释放处理机。

3. 优先权调度算法

   该算法既**可以用于作业调度，也可以用于进程调度**；

   - 在作业调度中，优先级调度算法每次从后备作业队列中选择优先级最髙的一个或几个作业，将它们调入内存，分配必要的资源，创建进程并放入就绪队列。
   - 在进程调度中，优先级调度算法每次从就绪队列中选择优先级最高的进程，将处理机分配给它，使之投入运行。

   分类：

   剥夺式优先调度算法：当优先级更高的进程进入就绪队列将正在运行的进程停止，将处理机分配给优先级高的进程。（非剥夺式优先调度算法反之）

   **优先级是否改变**

   静态优先级。优先级是在创建进程时确定的，且在进程的整个运行期间保持不变。确定静态优先级的主要依据有进程类型、进程对资源的要求、用户要求。

   动态优先级。在进程运行过程中，根据进程情况的变化动态调整优先级。动态调整优先级的主要依据为进程占有CPU时间的长短、就绪进程等待CPU时间的长短。

   

4. 高响应比优先调度算法

高响应比优先调度算法**主要用于作业调度**，该算法是对**FCFS调度算法和SJF调度算法的一种综合平衡**，同时考虑每个作业的**等待时间和估计的运行时间**。

### 线程的通信方式

## 5.1 锁机制

互斥锁：提供了以**排他方式**防止数据结构被并发修改的方法。

读写锁：允许多个线程同时**读共享数据**，而对**写操作是互斥**的。

条件变量：可以**以原子的方式阻塞**进程，直到某个特定条件为真为止。对条件的测试是在**互斥锁的**保护下进行的。**条件变量始终与互斥锁一起使用。**

### 信号量机制(Semaphore)

无名信号量和命名信号量

信号量：数据结构为一个值和一个指针

- 指针指向等待该信号量的下一进程。

信号量的值与相应资源的使用情况有关：

- 当它的值大于0时，表示当前可用资源的数量；
- 当它的值小于0时，其绝对值表示等待使用该资源的进程个数。